<ion-content class="main-content">
  <div class="header-section">
    <div class="header-buttons">
      <ion-button (click)="goBack()" fill="outline" class="dashboard-btn">
        <ion-icon name="home-outline" slot="start"></ion-icon>
        Dashboard
      </ion-button>
      <ion-button (click)="goAdd()" fill="outline" class="add-btn">
        <ion-icon name="add" slot="start"></ion-icon>
        Tambah Aset
      </ion-button>
    </div>
    <h1 class="page-title">Daftar Assets</h1>
  </div>

  <div class="content-container">

    <!-- Search & Filter Section -->
    <div class="search-filter-section">
      <div class="search-box">
        <ion-icon name="search-outline"></ion-icon>
        <input type="text" placeholder="Cari aset berdasarkan nama atau kode..." [(ngModel)]="searchText" (input)="onSearch()">
      </div>

      <label class="view-only-checkbox" *ngIf="isViewOnly">
        <input type="checkbox" disabled checked>
        <span>View Only</span>
      </label>
    </div>

    <!-- Empty State -->
    <div *ngIf="filteredAssets.length === 0" class="empty-state">
      <ion-icon name="folder-open-outline"></ion-icon>
      <h2>Tidak ada aset ditemukan</h2>
      <p *ngIf="searchText">Coba kata kunci lain atau filter berbeda</p>
      <p *ngIf="!searchText && !isViewOnly">Mulai tambahkan aset pertama Anda</p>
      <ion-button (click)="goAdd()" color="primary" *ngIf="!isViewOnly && !searchText">
        <ion-icon name="add" slot="start"></ion-icon>
        Tambah Aset
      </ion-button>
    </div>

    <!-- Asset List -->
    <div class="asset-list" *ngIf="filteredAssets.length > 0">

      <div class="asset-item" *ngFor="let item of filteredAssets">

        <!-- Icon -->
        <div class="item-icon">
          <ion-icon [name]="getAssetIcon(item.code)"></ion-icon>
        </div>

        <!-- Content -->
        <div class="item-content">

          <!-- Title -->
          <div class="item-title">{{ item.name }}</div>

          <!-- Category & Condition -->
          <div class="item-meta">
            <span class="meta-label">Kategori: {{ item.code || 'Unknown' }}</span>
            <span class="status-badge" [ngClass]="{
              'status-good': isConditionGood(item.current_condition),
              'status-bad': isConditionBad(item.current_condition),
              'status-warning': isConditionWarning(item.current_condition)
            }">
              {{ item.current_condition || 'Unknown' }}
            </span>
          </div>

          <!-- Brand -->
          <div class="item-brand">
            <span>Merek: {{ item.brand || 'Tidak ada merek' }}</span>
          </div>

          <!-- Price -->
          <div class="item-price">
            {{ item.price | currency:'IDR':'Rp ':'1.0-0' }}
          </div>

          <!-- Action Buttons -->
          <div class="item-actions">
            <button class="action-btn edit-btn" (click)="goEdit(item.id)" *ngIf="!isViewOnly">
              <ion-icon name="create-outline"></ion-icon>
              Edit
            </button>
            <button class="action-btn delete-btn" (click)="confirmDelete(item)" *ngIf="!isViewOnly">
              <ion-icon name="trash-outline"></ion-icon>
              Hapus
            </button>
          </div>

        </div>

      </div>

    </div>

  </div>
</ion-content>